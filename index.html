<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BSG Equipment Quote Builder</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', Arial, sans-serif; background: #f0f2f5; color: #222; min-height: 100vh; }

  /* HEADER */
  .header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 60%, #0f3460 100%);
    padding: 0;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
  }
  .header-inner {
    max-width: 1300px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 32px;
  }
  .logo-area {
    display: flex;
    align-items: center;
    gap: 18px;
  }
  .logo-img {
    height: 64px;
    width: auto;
    display: block;
  }
  .logo-placeholder {
    height: 64px;
    width: 140px;
    background: rgba(255,255,255,0.1);
    border: 2px dashed rgba(255,255,255,0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255,255,255,0.5);
    font-size: 11px;
    text-align: center;
  }
  .header-title {
    color: #fff;
    font-size: 22px;
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  .header-subtitle {
    color: #a0c4ff;
    font-size: 12px;
    margin-top: 2px;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .header-date {
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    text-align: right;
  }

  /* MAIN LAYOUT */
  .main { max-width: 1300px; margin: 0 auto; padding: 28px 24px; display: grid; grid-template-columns: 1fr 420px; gap: 24px; }

  /* CARDS */
  .card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    padding: 24px;
    margin-bottom: 20px;
  }
  .card-title {
    font-size: 15px;
    font-weight: 700;
    color: #0f3460;
    margin-bottom: 16px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e8edf5;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .card-title .icon { font-size: 18px; }

  /* FORM FIELDS */
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px; }
  .form-group { display: flex; flex-direction: column; gap: 5px; }
  .form-group label { font-size: 12px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px; }
  .form-group input, .form-group select {
    padding: 10px 14px;
    border: 1.5px solid #dde3f0;
    border-radius: 8px;
    font-size: 14px;
    color: #222;
    transition: border-color 0.2s;
    outline: none;
    background: #fafbff;
  }
  .form-group input:focus, .form-group select:focus { border-color: #0f3460; background: #fff; }

  /* TIER SELECTOR */
  .tier-buttons { display: flex; gap: 10px; margin-bottom: 4px; }
  .tier-btn {
    flex: 1;
    padding: 12px 8px;
    border: 2px solid #dde3f0;
    border-radius: 10px;
    background: #fafbff;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
    font-size: 13px;
    font-weight: 600;
    color: #555;
  }
  .tier-btn .tier-label { font-size: 11px; color: #888; font-weight: 400; margin-top: 2px; }
  .tier-btn.active {
    border-color: #0f3460;
    background: #0f3460;
    color: #fff;
    box-shadow: 0 4px 12px rgba(15,52,96,0.3);
  }
  .tier-btn.active .tier-label { color: rgba(255,255,255,0.75); }

  /* SEARCH & FILTER */
  .search-filter { display: flex; gap: 10px; margin-bottom: 14px; }
  .search-input {
    flex: 1;
    padding: 10px 14px 10px 36px;
    border: 1.5px solid #dde3f0;
    border-radius: 8px;
    font-size: 14px;
    outline: none;
    background: #fafbff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.099zm-5.242 1.156a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z'/%3E%3C/svg%3E") no-repeat 12px center;
  }
  .search-input:focus { border-color: #0f3460; background-color: #fff; }
  .vendor-filter {
    padding: 10px 14px;
    border: 1.5px solid #dde3f0;
    border-radius: 8px;
    font-size: 13px;
    outline: none;
    background: #fafbff;
    min-width: 160px;
    cursor: pointer;
  }
  .vendor-filter:focus { border-color: #0f3460; }

  /* EQUIPMENT LIST */
  .equip-list { max-height: 420px; overflow-y: auto; border: 1.5px solid #e8edf5; border-radius: 10px; }
  .equip-item {
    display: flex;
    align-items: center;
    padding: 10px 14px;
    border-bottom: 1px solid #f0f3f8;
    cursor: pointer;
    transition: background 0.15s;
    gap: 12px;
  }
  .equip-item:last-child { border-bottom: none; }
  .equip-item:hover { background: #f0f5ff; }
  .equip-item.selected { background: #e8f0fe; }
  .equip-info { flex: 1; min-width: 0; }
  .equip-name { font-size: 13px; font-weight: 600; color: #1a1a2e; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .equip-vendor { font-size: 11px; color: #888; margin-top: 1px; }
  .equip-item-num { font-size: 11px; color: #aaa; }
  .equip-price { font-size: 14px; font-weight: 700; color: #0f3460; white-space: nowrap; min-width: 80px; text-align: right; }
  .add-btn {
    background: #0f3460;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
    white-space: nowrap;
  }
  .add-btn:hover { background: #1a4a8a; }
  .add-btn.added { background: #2ecc71; }

  .no-results { text-align: center; padding: 40px; color: #aaa; font-size: 14px; }

  /* RIGHT PANEL */
  .right-panel { position: sticky; top: 24px; height: fit-content; }

  /* QUOTE SUMMARY */
  .quote-summary { }
  .quote-items { max-height: 340px; overflow-y: auto; margin-bottom: 16px; }
  .quote-line {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #f0f3f8;
    gap: 10px;
  }
  .quote-line:last-child { border-bottom: none; }
  .ql-info { flex: 1; min-width: 0; }
  .ql-name { font-size: 12px; font-weight: 600; color: #222; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .ql-vendor { font-size: 10px; color: #aaa; }
  .qty-control { display: flex; align-items: center; gap: 4px; }
  .qty-btn {
    width: 26px; height: 26px;
    border: 1.5px solid #dde3f0;
    border-radius: 6px;
    background: #fafbff;
    cursor: pointer;
    font-size: 16px;
    font-weight: 700;
    display: flex; align-items: center; justify-content: center;
    color: #555;
    transition: all 0.15s;
    line-height: 1;
  }
  .qty-btn:hover { border-color: #0f3460; color: #0f3460; }
  .qty-num { font-size: 14px; font-weight: 700; min-width: 24px; text-align: center; color: #222; }
  .ql-total { font-size: 13px; font-weight: 700; color: #0f3460; min-width: 72px; text-align: right; }
  .remove-btn { color: #ccc; cursor: pointer; font-size: 18px; line-height: 1; transition: color 0.15s; border: none; background: none; padding: 2px 4px; }
  .remove-btn:hover { color: #e74c3c; }

  .empty-quote { text-align: center; padding: 40px 20px; color: #bbb; }
  .empty-quote .icon { font-size: 40px; margin-bottom: 8px; }
  .empty-quote p { font-size: 13px; }

  /* TOTALS */
  .totals-section { border-top: 2px solid #e8edf5; padding-top: 14px; margin-top: 4px; }
  .total-row { display: flex; justify-content: space-between; align-items: center; padding: 4px 0; font-size: 13px; color: #555; }
  .total-row.grand { font-size: 17px; font-weight: 800; color: #0f3460; padding-top: 8px; border-top: 1.5px solid #dde3f0; margin-top: 6px; }
  .item-count { background: #e8f0fe; color: #0f3460; border-radius: 20px; padding: 2px 10px; font-size: 11px; font-weight: 700; }

  /* EMAIL BTN */
  .email-btn {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #c0392b, #e74c3c);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 16px;
    box-shadow: 0 4px 16px rgba(192,57,43,0.35);
    letter-spacing: 0.3px;
  }
  .email-btn:hover { background: linear-gradient(135deg, #a93226, #c0392b); transform: translateY(-1px); box-shadow: 0 6px 20px rgba(192,57,43,0.45); }
  .email-btn:disabled { background: #ccc; box-shadow: none; cursor: not-allowed; transform: none; }
  .clear-btn {
    width: 100%;
    padding: 10px;
    background: #fff;
    color: #888;
    border: 1.5px solid #dde3f0;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 8px;
  }
  .clear-btn:hover { border-color: #e74c3c; color: #e74c3c; }

  /* TIER BADGE */
  .tier-badge {
    display: inline-block;
    background: #e8f0fe;
    color: #0f3460;
    border-radius: 20px;
    padding: 2px 10px;
    font-size: 11px;
    font-weight: 700;
    margin-left: 8px;
  }

  /* SCROLLBAR */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: #f5f5f5; border-radius: 3px; }
  ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #aaa; }

  /* RESULTS COUNT */
  .results-count { font-size: 12px; color: #888; margin-bottom: 8px; }

  @media (max-width: 900px) {
    .main { grid-template-columns: 1fr; }
    .right-panel { position: static; }
    .form-row { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-inner">
    <div class="logo-area">
      <img id="logoImg" class="logo-img" src="bsg_logo.png" alt="BSG Logo" onerror="this.style.display='none'; document.getElementById('logoFallback').style.display='flex';">
      <div id="logoFallback" class="logo-placeholder" style="display:none;">Place logo here<br><small>bsg_logo.png</small></div>
      <div>
        <div class="header-title">Beverage Service Group</div>
        <div class="header-subtitle">Equipment Quote Builder</div>
      </div>
    </div>
    <div class="header-date" id="headerDate"></div>
  </div>
</div>

<div class="main">
  <!-- LEFT: FORM + CATALOG -->
  <div class="left-panel">

    <!-- Customer Info -->
    <div class="card">
      <div class="card-title"><span class="icon">üë§</span> Customer Information</div>
      <div class="form-row">
        <div class="form-group">
          <label>Customer Name</label>
          <input type="text" id="customerName" placeholder="Enter customer name" />
        </div>
        <div class="form-group">
          <label>Customer Email</label>
          <input type="email" id="customerEmail" placeholder="customer@company.com" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Company / Account</label>
          <input type="text" id="customerCompany" placeholder="Company name (optional)" />
        </div>
        <div class="form-group">
          <label>Quote Date</label>
          <input type="text" id="quoteDate" readonly style="background:#f5f7fc; color:#888;" />
        </div>
      </div>
    </div>

    <!-- Pricing Tier -->
    <div class="card">
      <div class="card-title"><span class="icon">üí∞</span> Pricing Tier</div>
      <div class="tier-buttons">
        <button class="tier-btn" onclick="setTier('list')" id="tier-list">
          List Price
          <div class="tier-label">Standard pricing</div>
        </button>
        <button class="tier-btn active" onclick="setTier('tier1')" id="tier-tier1">
          10‚Äì49 Units
          <div class="tier-label">Volume discount</div>
        </button>
        <button class="tier-btn" onclick="setTier('tier2')" id="tier-tier2">
          50+ Units
          <div class="tier-label">Best pricing</div>
        </button>
      </div>
    </div>

    <!-- Equipment Catalog -->
    <div class="card">
      <div class="card-title"><span class="icon">üì¶</span> Equipment Catalog <span id="tierBadge" class="tier-badge">10‚Äì49 Units</span></div>
      <div class="search-filter">
        <input type="text" class="search-input" id="searchInput" placeholder="Search equipment..." oninput="renderCatalog()" />
        <select class="vendor-filter" id="vendorFilter" onchange="renderCatalog()">
          <option value="">All Vendors</option>
        </select>
      </div>
      <div class="results-count" id="resultsCount"></div>
      <div class="equip-list" id="equipList"></div>
    </div>

  </div>

  <!-- RIGHT: QUOTE SUMMARY -->
  <div class="right-panel">
    <div class="card quote-summary">
      <div class="card-title">
        <span class="icon">üìã</span> Quote Summary
        <span class="item-count" id="itemCount">0 items</span>
      </div>

      <div class="quote-items" id="quoteItems">
        <div class="empty-quote">
          <div class="icon">üõí</div>
          <p>No items added yet.<br>Select equipment from the catalog.</p>
        </div>
      </div>

      <div class="totals-section" id="totalsSection" style="display:none;">
        <div class="total-row"><span>Subtotal</span><span id="subtotal">$0.00</span></div>
        <div class="total-row grand"><span>Total</span><span id="grandTotal">$0.00</span></div>
      </div>

      <button class="email-btn" id="emailBtn" onclick="sendEmail()" disabled>
        ‚úâÔ∏è Email Quote to Customer
      </button>
      <button class="clear-btn" onclick="clearQuote()">üóëÔ∏è Clear Quote</button>
    </div>
  </div>
</div>

<script>
// =============================================
// DATA
// =============================================
const ITEMS = [{"vendor":"Bunn-O-Matic Corporation","itemNum":"0700200900G","description":"Decanter Bunn Esy Pr","list":71.77,"tier1":66.64,"tier2":58.31},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0700201000G","description":"Ez-Pour Bunn Decaf","list":71.77,"tier1":66.64,"tier2":58.31},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0753204012G","description":"Refillable Caddy Assy","list":94.66,"tier1":87.9,"tier2":76.91},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750904020G","description":"Tea Disp Bunn Tdo-N-3.5","list":168.0,"tier1":156.0,"tier2":136.5},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750604005G","description":"Rws1 Gpr Warmer Single","list":179.31,"tier1":166.5,"tier2":145.69},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750604002E","description":"Bunn 1SH Stand","list":279.46,"tier1":259.5,"tier2":227.06},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304019E","description":"Bunn Infusion 1Sh Stand, 120V","list":327.92,"tier1":304.5,"tier2":266.44},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304003E","description":"Vpr 2 Burner Pour Over","list":337.62,"tier1":313.5,"tier2":274.31},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750104022E","description":"Bunn Tf Gen3 Server 1.5 Gal Mech","list":438.29,"tier1":406.98,"tier2":356.11},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304025E","description":"Bunn Infusion 2Sh Stand 120V","list":455.54,"tier1":423.0,"tier2":370.12},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304016E","description":"Bunn 2Sh Stand, 120V","list":478.15,"tier1":444.0,"tier2":388.5},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750104021E","description":"Bunn Tf Gen3 Server 1.5 Gal Digital","list":560.54,"tier1":520.5,"tier2":455.44},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750104200E","description":"Bunn Infusion Sh Server Round  1.5Gal","list":563.77,"tier1":523.5,"tier2":458.06},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750104000E","description":"Bunn Sh Server Square 1.5Gal","list":618.69,"tier1":574.5,"tier2":502.69},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750405000E","description":"Bunn Axiom In Line 15-3 Brewer","list":1067.77,"tier1":991.5,"tier2":867.56},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750004020E","description":"Infusion Icb-Dv Tall 120V","list":1492.62,"tier1":1386.0,"tier2":1212.75},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750004016E","description":"Icb-Dv Tall","list":1542.69,"tier1":1432.5,"tier2":1253.44},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750004023E","description":"Infusion Sh Dv Tall (Dual Voltage)","list":2046.69,"tier1":1900.5,"tier2":1662.94},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0751304010E","description":"Mhg, 120V, 60Hz Sst","list":2203.38,"tier1":2046.0,"tier2":1790.25},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304014E","description":"Bunn Single Sh Dbc","list":2500.62,"tier1":2322.0,"tier2":2031.75},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304018E","description":"Bunn Infusion Dual Sh 220V","list":2654.92,"tier1":2465.28,"tier2":2157.12},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0751105004E","description":"Imix 3 Side Hinge","list":3124.15,"tier1":2901.0,"tier2":2538.38},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304009E","description":"Dual Tf Dbc 120/240V","list":3360.0,"tier1":3120.0,"tier2":2730.0},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750304013E","description":"Dual Sh Dbc, Digital 120/208-240V","list":3431.08,"tier1":3186.0,"tier2":2787.75},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0751105003E","description":"Imix 5 Side Hinge","list":3599.08,"tier1":3342.0,"tier2":2924.25},{"vendor":"Crathco","itemNum":"0751299106E","description":"Cs-3L-16 Triple Tall 4.75 Gal S/S Sides","list":3030.91,"tier1":2814.42,"tier2":2462.62},{"vendor":"Crathco","itemNum":"0759001000E","description":"D25-4 Double 5 Gallon Plastic Sides","list":1752.18,"tier1":1627.02,"tier2":1423.64},{"vendor":"Crathco","itemNum":"0759001007E","description":"D35-3 Triple 5 Gallon S/S Sides","list":2405.24,"tier1":2233.44,"tier2":1954.26},{"vendor":"Crathco","itemNum":"0759001010E","description":"Cs-4E-16 Quad Mini 2.4 Gal S/S Sides","list":3102.27,"tier1":2880.68,"tier2":2520.59},{"vendor":"Crathco","itemNum":"0759001011E","description":"Cs-2D-16 Double 4.75 Gallon S/S Sides","list":2346.6,"tier1":2178.99,"tier2":1906.62},{"vendor":"Crathco","itemNum":"0759001012E","description":"D35-4 Triple 5 Gallon Plastic Sides","list":2245.63,"tier1":2085.23,"tier2":1824.57},{"vendor":"De Jong Duke","itemNum":"0750500115E","description":"Virtu 92|36 4G","list":8798.35,"tier1":8169.9,"tier2":7148.66},{"vendor":"De Jong Duke","itemNum":"0766501403E","description":"Zia 9236 Xl Ctr Disp - Ext Canister(B2C)","list":11029.32,"tier1":10241.51,"tier2":8961.32},{"vendor":"Dr. Coffee","itemNum":"0751114001E","description":"Coffee Center (110V)","list":4417.38,"tier1":4101.86,"tier2":3589.12},{"vendor":"Dr. Coffee","itemNum":"0751114002E","description":"Coffee Master 300F (220V)","list":10345.51,"tier1":9606.54,"tier2":8405.72},{"vendor":"Dr. Coffee","itemNum":"0751114003E","description":"F2 Plus (220V)","list":6102.65,"tier1":5738.17,"tier2":5145.9},{"vendor":"Dr. Coffee","itemNum":"0751114005E","description":"Coffee Master 300 (220V)","list":11730.12,"tier1":10892.26,"tier2":9530.72},{"vendor":"Dr. Coffee","itemNum":"0751114006E","description":"Dr. Coffee SC-12 Fridge (110v)","list":723.08,"tier1":671.43,"tier2":587.5},{"vendor":"Elmeco","itemNum":"0751299515E","description":"Elmeco Fc 1 Green Single","list":2157.54,"tier1":2003.43,"tier2":1753.0},{"vendor":"Elmeco","itemNum":"0751299513E","description":"Elmeco Fc 2Hd Green Led","list":3821.08,"tier1":3548.14,"tier2":3104.62},{"vendor":"Elmeco","itemNum":"0751299514E","description":"Elmeco Fc 3Hd Green Led","list":4903.08,"tier1":4552.86,"tier2":3983.75},{"vendor":"Evoca","itemNum":"0714099600E","description":"Wittenborg 9100 2 C S","list":6921.92,"tier1":6427.5,"tier2":5624.06},{"vendor":"Fetco","itemNum":"0750123003E","description":"Fetco L3D10 Dispenser","list":474.92,"tier1":441.0,"tier2":385.87},{"vendor":"Fetco","itemNum":"0750223140E","description":"Fetco L3D/L4D 1.5  Dispenser","list":628.38,"tier1":583.5,"tier2":510.56},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0750422004E","description":"Franke Su12 Refrigerator A1000","list":7487.85,"tier1":6953.0,"tier2":6083.88},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0750422005E","description":"A1000 Flex Franke Single Serve","list":22569.62,"tier1":20957.5,"tier2":18337.81},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0750422006E","description":"Franke A1000 Flavor Station","list":6174.62,"tier1":5733.57,"tier2":5016.88},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0751111024E","description":"Franke A800 Foam Master Espresso","list":16195.54,"tier1":15038.71,"tier2":13158.88},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0751111025E","description":"Franke S700 Foam Mast","list":16620.31,"tier1":15433.14,"tier2":13504.0},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0751111800E","description":"Franke A800 Bean 2 Cup","list":16195.54,"tier1":15038.71,"tier2":13158.88},{"vendor":"Lancer Corporation","itemNum":"0750124000E","description":"Soochie 3.2 2 Bowl Juice Unit","list":1412.91,"tier1":1311.99,"tier2":1147.99},{"vendor":"Lancer Corporation","itemNum":"0750125000E","description":"Soochie 3.2 3 Bowl Juice Unit","list":1798.28,"tier1":1669.83,"tier2":1461.1},{"vendor":"Nestle Usa","itemNum":"0714099103E","description":"Starbucks Serenade Bean To Cup","list":7209.23,"tier1":6694.29,"tier2":5857.5},{"vendor":"Newco Enterprises Inc.","itemNum":"0725098013E","description":"Eccelenza Touch, Vki","list":9907.69,"tier1":9200.0,"tier2":8050.0},{"vendor":"Newco Enterprises Inc.","itemNum":"0750015042E","description":"Newco Nkl3 Brewer W/","list":688.96,"tier1":639.75,"tier2":559.78},{"vendor":"Newco Enterprises Inc.","itemNum":"0750015052E","description":"Newco 20:1 Brewer","list":1022.17,"tier1":949.16,"tier2":830.52},{"vendor":"Newco Enterprises Inc.","itemNum":"0750015100E","description":"20:1 Combo Coffee/Tea Brewer","list":923.93,"tier1":857.93,"tier2":750.69},{"vendor":"Newco Enterprises Inc.","itemNum":"0751103003E","description":"Newco Bistro Touch","list":3660.54,"tier1":3399.07,"tier2":2974.19},{"vendor":"Newco Enterprises Inc.","itemNum":"0751103010E","description":"Newco Caf√© Espresso 2.0","list":3989.62,"tier1":3704.64,"tier2":3241.56},{"vendor":"Newco Enterprises Inc.","itemNum":"0751103011E","description":"1 Gal Fridge Kit For Caf√© Espresso","list":778.46,"tier1":722.86,"tier2":632.5},{"vendor":"Newco Enterprises Inc.","itemNum":"0751141010E","description":"Infinibrew W/2 Servers","list":14955.31,"tier1":13887.07,"tier2":12151.19},{"vendor":"Newco Enterprises Inc.","itemNum":"0751141011E","description":"Infinibrew Server","list":1006.69,"tier1":934.79,"tier2":817.94},{"vendor":"Seb Professional North America","itemNum":"0750947506E","description":"Curtis Caf√© Primo 1 Stn  With Lightbox","list":1657.68,"tier1":1539.27,"tier2":1346.86},{"vendor":"Seb Professional North America","itemNum":"0750407019E","description":"Gemini 120 A","list":1451.52,"tier1":1347.84,"tier2":1179.36},{"vendor":"Seb Professional North America","itemNum":"0750107021E","description":"Curtis Thermo 1.0 Gallon Dispenser","list":562.78,"tier1":522.58,"tier2":457.26},{"vendor":"Seb Professional North America","itemNum":"0750104019E","description":"Curtis 1.5 Gallon Thermal W/Sight Glass","list":479.68,"tier1":445.42,"tier2":389.74},{"vendor":"Seb Professional North America","itemNum":"0750407040E","description":"Curtis Gem3Xn Disp","list":702.93,"tier1":652.72,"tier2":571.13},{"vendor":"Seb Professional North America","itemNum":"0750107019E","description":"Gemini 1.5 Gal. Satellite Server","list":291.52,"tier1":270.69,"tier2":236.86},{"vendor":"Seb Professional North America","itemNum":"0750414067E","description":"1.5 Gallon Thermopro Freshtrack Dispenser (Led Liquid Level, Timer)","list":566.36,"tier1":525.91,"tier2":460.17},{"vendor":"Seb Professional North America","itemNum":"0725098017E","description":"Seb Wmf Center Cooler","list":2468.4,"tier1":2292.09,"tier2":2005.58},{"vendor":"Seb Professional North America","itemNum":"0750919003G","description":"Seb Aw-2S-10 Step Warmer","list":194.12,"tier1":180.25,"tier2":157.72},{"vendor":"Seb Professional North America","itemNum":"0725098015E","description":"Seb Genesis Skyline (Batch Brew)","list":17283.09,"tier1":16048.59,"tier2":14042.51},{"vendor":"Seb Professional North America","itemNum":"0751003000E","description":"Cafepc2Cs10000|120V 2Wg 2Sttn","list":1851.17,"tier1":1718.94,"tier2":1504.07},{"vendor":"Seb Professional North America","itemNum":"0750947507E","description":"Curtis Caf√© Primo 2 Stn  With Lightbox","list":1934.52,"tier1":1796.34,"tier2":1571.79},{"vendor":"Seb Professional North America","itemNum":"0750407025E","description":"Seb Curtis G3 Single 2.2L - 2.5L Airpot Dv","list":1063.43,"tier1":987.47,"tier2":864.04},{"vendor":"Seb Professional North America","itemNum":"0750407034E","description":"Curtis D500Gth12A000 Arpt Brwr","list":1044.68,"tier1":970.06,"tier2":848.8},{"vendor":"Seb Professional North America","itemNum":"0759001300E","description":"G3 Airpot Twin 2.2L","list":1792.27,"tier1":1664.25,"tier2":1456.22},{"vendor":"Seb Professional North America","itemNum":"0751107001E","description":"Cafepc3Cs10000|120V 2Wg 3Sttn","list":2093.15,"tier1":1943.64,"tier2":1700.68},{"vendor":"Seb Professional North America","itemNum":"0751107004E","description":"Cafepc3Cl10000|120V 2Wg 3Sttn Wlitbox","list":2300.79,"tier1":2136.45,"tier2":1869.39},{"vendor":"Seb Professional North America","itemNum":"0751107021E","description":"Pcng3 Primo Cappuccino 3 Spout","list":3100.57,"tier1":2879.1,"tier2":2519.21},{"vendor":"Seb Professional North America","itemNum":"0750002002E","description":"Urn-Ru 300 3 Gal","list":4859.73,"tier1":4512.61,"tier2":3948.53},{"vendor":"Seb Professional North America","itemNum":"0751003005E","description":"Cafepc4Cl10000|120V 2Wg 4Sttn Wlitbox","list":2657.83,"tier1":2467.99,"tier2":2159.49},{"vendor":"Seb Professional North America","itemNum":"0751107026E","description":"Pcng4-Primo Cappuccino 4 Spout","list":3944.75,"tier1":3662.99,"tier2":3205.11},{"vendor":"Seb Professional North America","itemNum":"0751107023E","description":"Pcng5 Primo Cappuccino 5 Spout","list":4185.23,"tier1":3886.29,"tier2":3400.5},{"vendor":"Seb Professional North America","itemNum":"0751107025E","description":"Pcng5 Primo Cappuccino 5 Spout Dv","list":4251.34,"tier1":3947.67,"tier2":3454.21},{"vendor":"Seb Professional North America","itemNum":"0725098016E","description":"Seb Wmf 5000 S+","list":19964.46,"tier1":18538.43,"tier2":16221.12},{"vendor":"Seb Professional North America","itemNum":"0751107028E","description":"Pcng6 Primo Cappuccino 6 Spout","list":4411.98,"tier1":4096.84,"tier2":3584.74},{"vendor":"Seb Professional North America","itemNum":"0750007011E","description":"Urn-Ru 600 6 Gal","list":5315.41,"tier1":4935.74,"tier2":4318.77},{"vendor":"Seb Professional North America","itemNum":"0750403000E","description":"Hnd Cafe Series 2 Burner Pour Over","list":626.65,"tier1":581.89,"tier2":509.16},{"vendor":"Seb Professional North America","itemNum":"0750407021E","description":"G3 Alpha¬Æ Decanter 3 Station, 1 Lower, 2 Upper Warmers","list":1008.55,"tier1":936.51,"tier2":819.45},{"vendor":"Seb Professional North America","itemNum":"0750407036E","description":"G3 Alpha¬Æ Decanter 3 Station, 1 Lower, 2 Upper Warmers (Dual Voltage)","list":1073.06,"tier1":996.41,"tier2":871.86},{"vendor":"Seb Professional North America","itemNum":"0759001116E","description":"Curtis G3 Thermal Decanter D60Gt63A000","list":1042.09,"tier1":967.66,"tier2":846.7},{"vendor":"Seb Professional North America","itemNum":"0750115041G","description":"Curtis 64Oz Ss Tft642H","list":103.05,"tier1":95.69,"tier2":83.72},{"vendor":"Seb Professional North America","itemNum":"0750120007G","description":"2.2L Glass Lined Airpot Blk","list":64.09,"tier1":59.51,"tier2":52.07},{"vendor":"Seb Professional North America","itemNum":"0750947505E","description":"Curtis Caf√© Primo 1 Stn","list":1506.48,"tier1":1398.88,"tier2":1224.02},{"vendor":"Seb Professional North America","itemNum":"0714099900E","description":"Schaerer Coffee Club 2-Step","list":8680.29,"tier1":8060.27,"tier2":7052.74},{"vendor":"Seb Professional North America","itemNum":"0759001110E","description":"Seb G3 Gemx 1.5 Gal Single  Intellifresh","list":2903.09,"tier1":2695.73,"tier2":2358.76},{"vendor":"Seb Professional North America","itemNum":"0759001112E","description":"Curtis G3 Thermopro Single 1.0/1.5 Gal Tall","list":1541.89,"tier1":1431.76,"tier2":1252.79},{"vendor":"Seb Professional North America","itemNum":"0750907068E","description":"G3 Gemini¬Æ Single 1.5 Gal.","list":1862.15,"tier1":1729.14,"tier2":1512.99},{"vendor":"Seb Professional North America","itemNum":"0759001105E","description":"Single G3 Thermal Brewer 1.5 Gallon Dv","list":2004.45,"tier1":1861.28,"tier2":1628.62},{"vendor":"Seb Professional North America","itemNum":"0750907067E","description":"G3 Gemini¬Æ Twin 1.5 Gal.","list":2849.13,"tier1":2645.62,"tier2":2314.92},{"vendor":"Seb Professional North America","itemNum":"0759001005E","description":"Twin G3 Thermal Brewer 1.5 Gallon","list":2813.94,"tier1":2612.94,"tier2":2286.33},{"vendor":"Seb Professional North America","itemNum":"0750907071E","description":"3.0-5.0 Gallon Dual Dilution Tea Brewer, Rotating Brew Basket","list":1185.48,"tier1":1100.8,"tier2":963.2},{"vendor":"Seb Professional North America","itemNum":"0759001119E","description":"G3 Tea/Coffee Combo Brewer","list":1395.3,"tier1":1295.64,"tier2":1133.68},{"vendor":"Seb Professional North America","itemNum":"0750919000E","description":"Tcs Combo W(2)Tcn3 Disp","list":1185.6,"tier1":1100.91,"tier2":963.3},{"vendor":"Seb Professional North America","itemNum":"0759001111E","description":"Curtis G3 Gemx Twin Sh","list":4135.65,"tier1":3840.24,"tier2":3360.21},{"vendor":"Seb Professional North America","itemNum":"0759001114E","description":"G4 Thermopro¬Æ Single 1.5 Gal. Dual Voltage","list":2377.31,"tier1":2207.5,"tier2":1931.56},{"vendor":"Seb Professional North America","itemNum":"0750947502E","description":"G4 Single 1.5 Gal. Direct Heat Brewer","list":2220.62,"tier1":2062.0,"tier2":1804.25},{"vendor":"Seb Professional North America","itemNum":"0759001115E","description":"G4 Thermopro¬Æ Twin 1.5 Gal","list":3156.46,"tier1":2931.0,"tier2":2564.62},{"vendor":"Seb Professional North America","itemNum":"0750907074E","description":"G4 Twin 1.5 Gal Direct Heat Brewer","list":3215.42,"tier1":2985.75,"tier2":2612.53},{"vendor":"Seb Professional North America","itemNum":"0750407038E","description":"Curtis G4Gemx Brewer W 2 Disp","list":4101.12,"tier1":3808.18,"tier2":3332.16},{"vendor":"Seb Professional North America","itemNum":"0759001108E","description":"Curtis G4 Gemx Single Sh","list":3319.98,"tier1":3082.84,"tier2":2697.48},{"vendor":"Seb Professional North America","itemNum":"0750907072E","description":"Curtis G4Gemxsift63A3000 W/ Legs 1.5 Gal Single","list":3326.5,"tier1":3088.89,"tier2":2702.78},{"vendor":"Seb Professional North America","itemNum":"0759001109E","description":"Curtis G4 Gemx Twin Sh","list":4446.05,"tier1":4128.48,"tier2":3612.42},{"vendor":"Seb Professional North America","itemNum":"0750947504E","description":"G4 Tea Brewer With Rotating Basket","list":1663.15,"tier1":1544.36,"tier2":1351.31},{"vendor":"Seb Professional North America","itemNum":"0750947503E","description":"G4 Combo Tea/Coffee W/Adj Shelf","list":1848.93,"tier1":1716.86,"tier2":1502.26},{"vendor":"Seb Professional North America","itemNum":"0750107020E","description":"Gem 3 If Satellite","list":589.15,"tier1":547.06,"tier2":478.68},{"vendor":"Seb Professional North America","itemNum":"0750608000E","description":"Curtis Gem 5 If  Warmer Single","list":240.77,"tier1":223.57,"tier2":195.62},{"vendor":"Seb Professional North America","itemNum":"0750104011E","description":"Curtis Gemini If Twin Warmer","list":360.29,"tier1":334.56,"tier2":292.74},{"vendor":"Seb Professional North America","itemNum":"0750107008G","description":"Gem-5 Stand","list":166.62,"tier1":154.72,"tier2":135.38},{"vendor":"Seb Professional North America","itemNum":"0750104017E","description":"Curtis Sh Gemsxift 1.5 Gallon","list":602.22,"tier1":559.21,"tier2":489.31},{"vendor":"Seb Professional North America","itemNum":"0759001118E","description":"Curtis Gem 5Xtift Twin Warmer","list":360.02,"tier1":334.3,"tier2":292.51},{"vendor":"Seb Professional North America","itemNum":"0750104018E","description":"Curtis Sh Stand Gem5Xsift 1.5 Gallon","list":267.24,"tier1":248.15,"tier2":217.13},{"vendor":"Seb Professional North America","itemNum":"0751111031E","description":"Schaerer Soul C W/Cleaning Pouch","list":16819.31,"tier1":15617.93,"tier2":13665.69},{"vendor":"Trendware Products Co., Ltd","itemNum":"0750023100E","description":"Trendy Server W/Sight Glass 1.5 Gal","list":161.8,"tier1":150.24,"tier2":131.46},{"vendor":"Unic  Usa Corp","itemNum":"0751111020E","description":"Unic Rumba Plus","list":5682.92,"tier1":5277.0,"tier2":4617.38},{"vendor":"Unic  Usa Corp","itemNum":"0751111030E","description":"Mira Hi Profile Twin With Pod","list":8335.38,"tier1":7740.0,"tier2":6772.5},{"vendor":"Unic  Usa Corp","itemNum":"0751111070E","description":"Classic Plus Steam Hi Profile","list":8293.38,"tier1":7701.0,"tier2":6738.37},{"vendor":"United Food Group Inc.","itemNum":"0780501000E","description":"Pserv Short No Light","list":697.85,"tier1":648.0,"tier2":567.0},{"vendor":"United Food Group Inc.","itemNum":"0780501001E","description":"Pserv Tall  Led 5 Flvr","list":880.38,"tier1":817.5,"tier2":715.31},{"vendor":"United Food Group Inc.","itemNum":"0780501006E","description":"Ufg Evolution 2Hd P2L Cream Disp","list":1615.38,"tier1":1500.0,"tier2":1312.5},{"vendor":"Zhanjiang Sapoe Drink Systems Mfg Co Ltd","itemNum":"0751199200E","description":"Ronnoco 3 Head Cappuccino -Sapoe","list":736.4,"tier1":683.8,"tier2":598.32},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0751204000E","description":"Ultra 2 Granita Machine","list":3632.1,"tier1":3372.66,"tier2":2951.08},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0714099102E","description":"Bunn Crescendo Bean To Cup","list":5847.69,"tier1":5430.0,"tier2":4751.25},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0750004045E","description":"Nitron Cold Draft W/Gas Module 1Still/1Nitro","list":7059.23,"tier1":6555.0,"tier2":5735.62},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0714099105E","description":"Bunn Sure Immersion 312 Bean To Cup","list":9177.0,"tier1":8521.5,"tier2":7456.31},{"vendor":"Bunn-O-Matic Corporation","itemNum":"0714099400E","description":"Fast Cup B2C 208 Volt","list":13730.77,"tier1":12750.0,"tier2":11156.25},{"vendor":"Food Concepts Inc (Fci)","itemNum":"0750947100G","description":"Iced Coffee Display Led","list":1256.35,"tier1":1166.61,"tier2":1020.78},{"vendor":"Foshan Carefor Electrical Appliances Co Ltd","itemNum":"0759002001G","description":"Foshan 3 Gal Tea Dispenser","list":84.44,"tier1":78.41,"tier2":68.6},{"vendor":"Holiday House Dist.","itemNum":"0700403104G","description":"HH  4 Cup and Lid Combo Rack","list":67.52,"tier1":62.7,"tier2":54.86},{"vendor":"Jb Plastics","itemNum":"0750946000G","description":"Cold Brew Display Rack","list":282.69,"tier1":262.5,"tier2":229.69},{"vendor":"Newco Enterprises Inc.","itemNum":"0750115028G","description":"Airpot Blk Plstc 2.2 Liter","list":59.77,"tier1":55.5,"tier2":48.56},{"vendor":"Newco Enterprises Inc.","itemNum":"0750115030G","description":"Newco Airpot Rack 2 Hole In Line","list":80.77,"tier1":75.0,"tier2":65.62},{"vendor":"Newco Enterprises Inc.","itemNum":"0750118001G","description":"Airpot Rack Assy 3Comp Gm70571","list":84.0,"tier1":78.0,"tier2":68.25},{"vendor":"Newco Enterprises Inc.","itemNum":"0750199000G","description":"Server Ace Tc Thermal","list":56.54,"tier1":52.5,"tier2":45.94},{"vendor":"Newco Enterprises Inc.","itemNum":"0750604002G","description":"Wx2 Warmer","list":95.31,"tier1":88.5,"tier2":77.44},{"vendor":"Newco Enterprises Inc.","itemNum":"0750615003G","description":"Newco Gwt-1 Warmer","list":102.58,"tier1":95.25,"tier2":83.34},{"vendor":"Newco Enterprises Inc.","itemNum":"0750907005G","description":"Tc-3 / 3 Gal Tea Disp","list":129.23,"tier1":120.0,"tier2":105.0},{"vendor":"Newco Enterprises Inc.","itemNum":"0750915000G","description":"Newco Vct-30 Tea Dispenser","list":143.77,"tier1":133.5,"tier2":116.81},{"vendor":"Newco Enterprises Inc.","itemNum":"0750915005G","description":"Newco Vct Stand 9.0","list":80.77,"tier1":75.0,"tier2":65.62},{"vendor":"Newco Enterprises Inc.","itemNum":"0751499030G","description":"Import 1.9 Thermal Tall With Lid","list":65.91,"tier1":61.2,"tier2":53.55},{"vendor":"Plastic & Products Marketing","itemNum":"0750404048G","description":"Plastic Cup & Lid Dispenser (Iced Coffee, Pet Cups/Lids)","list":127.34,"tier1":118.25,"tier2":103.46},{"vendor":"Qingdao Sunworld","itemNum":"0750936055G","description":"Camellia Tea Rack (Order Via Eqp Team)","list":10.34,"tier1":9.6,"tier2":8.4},{"vendor":"R Torre & Company","itemNum":"0701000320G","description":"Torani Wire Rack 3 Tier Syrp 750Ml","list":51.48,"tier1":47.81,"tier2":41.83},{"vendor":"R Torre & Company","itemNum":"0701000470G","description":"Torani Wire Rack Puree/Sauce","list":50.22,"tier1":46.64,"tier2":40.81},{"vendor":"Seb Professional North America","itemNum":"0751107022E","description":"Pcng3300 - Primo Cappuccino 3 Spout W/Lift Door","list":3356.64,"tier1":3116.88,"tier2":2727.27},{"vendor":"Seb Professional North America","itemNum":"0751900139M","description":"Schaerer Seb Pro Walter Filter Head","list":196.33,"tier1":182.31,"tier2":159.52},{"vendor":"Seb Professional North America","itemNum":"0751900140M","description":"Schaerer Seb Pro Exchange Cartridge Coffee","list":306.76,"tier1":284.85,"tier2":249.24},{"vendor":"Seb Professional North America","itemNum":"0751900210M","description":"Schaerer Pro Exchange Cartridge, Espresso","list":351.62,"tier1":326.5,"tier2":285.69},{"vendor":"Seb Professional North America","itemNum":"0751111034E","description":"Soul 12 2 Step 2 Grinders 16G Brew Unit","list":18864.38,"tier1":17516.93,"tier2":15327.31},{"vendor":"Service Ideas  Inc.","itemNum":"0750199002G","description":"Server 1.9L Short B/Thru","list":69.78,"tier1":64.8,"tier2":56.7},{"vendor":"Trendware Products Co., Ltd","itemNum":"0750115040G","description":"2.5L Airpot W/Straight Sides","list":41.64,"tier1":38.67,"tier2":33.84},{"vendor":"Unic  Usa Corp","itemNum":"0751111065G","description":"Dual Chamber Adapter","list":1318.15,"tier1":1224.0,"tier2":1071.0},{"vendor":"Vm International","itemNum":"0712100000G","description":"Frozen Mixing Jug - 3Gal","list":8.88,"tier1":8.25,"tier2":7.22},{"vendor":"Wunder-Bar","itemNum":"0700200400G","description":"Decanter Ronnoco","list":12.2,"tier1":11.33,"tier2":9.91},{"vendor":"Wunder-Bar","itemNum":"0700200500G","description":"Decanter Ronnoco Decaf","list":12.2,"tier1":11.33,"tier2":9.91},{"vendor":"Wunder-Bar","itemNum":"0700200700G","description":"Decanter Henderson Reg","list":12.2,"tier1":11.33,"tier2":9.91},{"vendor":"Wunder-Bar","itemNum":"0700200800G","description":"Decanter Henderson Decaf","list":12.2,"tier1":11.33,"tier2":9.91},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0774500141M","description":"Franke Water Filter System Kit V2","list":555.16,"tier1":515.5,"tier2":451.07},{"vendor":"Franke Resupply Systems, Inc.","itemNum":"0774600076M","description":"Franke Modem Teltonika Iot Kit","list":825.67,"tier1":766.7,"tier2":670.86},{"vendor":"Holiday House Dist.","itemNum":"0768509910M","description":"Dual Drip Tray 5\" X 18\"","list":37.28,"tier1":34.62,"tier2":30.29},{"vendor":"Holiday House Dist.","itemNum":"0768509926M","description":"Single Drip Tray 5\" X 8\"","list":7.9,"tier1":7.34,"tier2":6.42},{"vendor":"Seb Professional North America","itemNum":"0751111033E","description":"Soul 12 2 Step 2 Grinders 30G Brew Unit","list":19058.23,"tier1":17696.93,"tier2":15484.81},{"vendor":"Seb Professional North America","itemNum":"0750919001G","description":"Curtis Tcn3 Tea Disp 3 Gal Slm","list":186.26,"tier1":172.96,"tier2":151.34},{"vendor":"Seb Professional North America","itemNum":"0751107012E","description":"Seb Twin 7.5Lb Hopper, Grinder","list":2287.6,"tier1":2124.2,"tier2":1858.67},{"vendor":"Lavazza Professional North America Llc","itemNum":"0725098020V","description":"Lavazza Flavia C600 Station","list":3069.21,"tier1":2849.99,"tier2":2493.74},{"vendor":"Lavazza Professional North America Llc","itemNum":"0725098021V","description":"Lavazza Flavia Chill Add On","list":751.15,"tier1":697.5,"tier2":610.31},{"vendor":"Lavazza Professional North America Llc","itemNum":"0730100201V","description":"Lavazza Flavia Merchandiser 4 Column","list":192.23,"tier1":178.5,"tier2":156.19},{"vendor":"Beverage Service Group","itemNum":"0750801003Y","description":"Media Service (monthly)","list":99.95,"tier1":99.95,"tier2":99.95}];

// =============================================
// STATE
// =============================================
let currentTier = 'tier1';
let quoteItems = []; // {item, qty}

// =============================================
// INIT
// =============================================
function init() {
  const now = new Date();
  const dateStr = now.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  document.getElementById('quoteDate').value = dateStr;
  document.getElementById('headerDate').innerHTML = `Quote Date<br><strong>${dateStr}</strong>`;

  // Populate vendor filter
  const vendors = [...new Set(ITEMS.map(i => i.vendor))].sort();
  const sel = document.getElementById('vendorFilter');
  vendors.forEach(v => {
    const opt = document.createElement('option');
    opt.value = v;
    opt.textContent = v;
    sel.appendChild(opt);
  });

  renderCatalog();
  renderQuote();
}

// =============================================
// TIER
// =============================================
const TIER_LABELS = { list: 'List Price', tier1: '10‚Äì49 Units', tier2: '50+ Units' };

function setTier(tier) {
  currentTier = tier;
  document.querySelectorAll('.tier-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tier-' + tier).classList.add('active');
  document.getElementById('tierBadge').textContent = TIER_LABELS[tier];
  renderCatalog();
  renderQuote();
}

function getPrice(item) {
  return item[currentTier];
}

function fmt(n) {
  return '$' + n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// =============================================
// CATALOG
// =============================================
function renderCatalog() {
  const search = document.getElementById('searchInput').value.toLowerCase().trim();
  const vendor = document.getElementById('vendorFilter').value;

  let filtered = ITEMS.filter(item => {
    const matchVendor = !vendor || item.vendor === vendor;
    const matchSearch = !search ||
      item.description.toLowerCase().includes(search) ||
      item.vendor.toLowerCase().includes(search) ||
      item.itemNum.toLowerCase().includes(search);
    return matchVendor && matchSearch;
  });

  document.getElementById('resultsCount').textContent = `Showing ${filtered.length} of ${ITEMS.length} items`;

  const container = document.getElementById('equipList');
  if (filtered.length === 0) {
    container.innerHTML = '<div class="no-results">No equipment found matching your search.</div>';
    return;
  }

  container.innerHTML = filtered.map(item => {
    const inQuote = quoteItems.find(q => q.item.itemNum === item.itemNum);
    return `<div class="equip-item${inQuote ? ' selected' : ''}" id="row-${item.itemNum.replace(/[^a-z0-9]/gi,'_')}">
      <div class="equip-info">
        <div class="equip-name" title="${item.description}">${item.description}</div>
        <div class="equip-vendor">${item.vendor} ¬∑ <span class="equip-item-num">${item.itemNum}</span></div>
      </div>
      <div class="equip-price">${fmt(getPrice(item))}</div>
      <button class="add-btn${inQuote ? ' added' : ''}" onclick="addItem('${item.itemNum}')">
        ${inQuote ? '‚úì Added' : '+ Add'}
      </button>
    </div>`;
  }).join('');
}

// =============================================
// QUOTE MANAGEMENT
// =============================================
function addItem(itemNum) {
  const item = ITEMS.find(i => i.itemNum === itemNum);
  if (!item) return;
  const existing = quoteItems.find(q => q.item.itemNum === itemNum);
  if (existing) {
    existing.qty++;
  } else {
    quoteItems.push({ item, qty: 1 });
  }
  renderCatalog();
  renderQuote();
}

function changeQty(itemNum, delta) {
  const idx = quoteItems.findIndex(q => q.item.itemNum === itemNum);
  if (idx === -1) return;
  quoteItems[idx].qty += delta;
  if (quoteItems[idx].qty <= 0) {
    quoteItems.splice(idx, 1);
    renderCatalog();
  }
  renderQuote();
}

function removeItem(itemNum) {
  quoteItems = quoteItems.filter(q => q.item.itemNum !== itemNum);
  renderCatalog();
  renderQuote();
}

function clearQuote() {
  if (quoteItems.length === 0) return;
  if (confirm('Clear all items from the quote?')) {
    quoteItems = [];
    renderCatalog();
    renderQuote();
  }
}

function renderQuote() {
  const container = document.getElementById('quoteItems');
  const totalsSection = document.getElementById('totalsSection');
  const emailBtn = document.getElementById('emailBtn');
  const itemCountEl = document.getElementById('itemCount');

  const totalQty = quoteItems.reduce((s, q) => s + q.qty, 0);
  itemCountEl.textContent = totalQty === 0 ? '0 items' : `${totalQty} item${totalQty !== 1 ? 's' : ''}`;

  if (quoteItems.length === 0) {
    container.innerHTML = `<div class="empty-quote"><div class="icon">üõí</div><p>No items added yet.<br>Select equipment from the catalog.</p></div>`;
    totalsSection.style.display = 'none';
    emailBtn.disabled = true;
    return;
  }

  let subtotal = 0;
  container.innerHTML = quoteItems.map(q => {
    const lineTotal = getPrice(q.item) * q.qty;
    subtotal += lineTotal;
    const id = q.item.itemNum.replace(/[^a-z0-9]/gi, '_');
    return `<div class="quote-line">
      <div class="ql-info">
        <div class="ql-name" title="${q.item.description}">${q.item.description}</div>
        <div class="ql-vendor">${q.item.vendor}</div>
      </div>
      <div class="qty-control">
        <button class="qty-btn" onclick="changeQty('${q.item.itemNum}', -1)">‚àí</button>
        <span class="qty-num">${q.qty}</span>
        <button class="qty-btn" onclick="changeQty('${q.item.itemNum}', 1)">+</button>
      </div>
      <div class="ql-total">${fmt(lineTotal)}</div>
      <button class="remove-btn" onclick="removeItem('${q.item.itemNum}')" title="Remove">√ó</button>
    </div>`;
  }).join('');

  document.getElementById('subtotal').textContent = fmt(subtotal);
  document.getElementById('grandTotal').textContent = fmt(subtotal);
  totalsSection.style.display = 'block';
  emailBtn.disabled = false;
}

// =============================================
// EMAIL
// =============================================
function sendEmail() {
  const name = document.getElementById('customerName').value.trim();
  const email = document.getElementById('customerEmail').value.trim();
  const company = document.getElementById('customerCompany').value.trim();
  const date = document.getElementById('quoteDate').value;

  if (!email) {
    alert('Please enter a customer email address before sending.');
    document.getElementById('customerEmail').focus();
    return;
  }
  if (!name) {
    alert('Please enter a customer name before sending.');
    document.getElementById('customerName').focus();
    return;
  }

  const tierLabel = TIER_LABELS[currentTier];
  let subtotal = 0;
  quoteItems.forEach(q => subtotal += getPrice(q.item) * q.qty);

  const greeting = company ? `${name} at ${company}` : name;

  let body = `Dear ${greeting},\n\nThank you for your interest in Beverage Service Group equipment. Please find your quote below.\n\n`;
  body += `Quote Date: ${date}\n`;
  body += `Pricing Tier: ${tierLabel}\n`;
  body += `\n${'='.repeat(60)}\n`;
  body += `EQUIPMENT QUOTE\n`;
  body += `${'='.repeat(60)}\n\n`;

  let lineNum = 1;
  quoteItems.forEach(q => {
    const unitPrice = getPrice(q.item);
    const lineTotal = unitPrice * q.qty;
    body += `${lineNum}. ${q.item.description}\n`;
    body += `   Item #: ${q.item.itemNum}  |  Vendor: ${q.item.vendor}\n`;
    body += `   Qty: ${q.qty}  √ó  ${fmt(unitPrice)} each  =  ${fmt(lineTotal)}\n\n`;
    lineNum++;
  });

  body += `${'‚îÄ'.repeat(40)}\n`;
  body += `TOTAL: ${fmt(subtotal)}\n`;
  body += `${'‚îÄ'.repeat(40)}\n\n`;
  body += `Pricing Tier Applied: ${tierLabel}\n\n`;
  body += `If you have any questions about this quote, please don't hesitate to reach out.\n\n`;
  body += `Best regards,\nBeverage Service Group\nEquipment Sales Team`;

  const subject = encodeURIComponent(`BSG Equipment Quote ‚Äî ${name} ‚Äî ${date}`);
  const bodyEncoded = encodeURIComponent(body);
  const mailtoLink = `mailto:${email}?subject=${subject}&body=${bodyEncoded}`;

  window.location.href = mailtoLink;
}

// =============================================
// START
// =============================================
init();
</script>
</body>
</html>
